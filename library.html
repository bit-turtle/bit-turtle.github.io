<!DOCTYPE html>
<html>
  <head>
    <title>Library System</title>
    <script src="jquery.min.js"></script>
    <script src="papaparse.min.js"></script>
    <style>
      body {
        text-align: center;
      }
      table {
        margin: auto;
      }
      td {
        width: 100px;
        padding: 0px;
      }
      img {
        width: 100px;
      }
    </style>
  </head>
  <body>
    <h1>Library System</h1>
    <p>Search: <input type="text" id="query"></p>
    <p>Search By: <input type="radio" name="setting" id="title" checked="true"><label for="title">Title</label><input type="radio" name="setting" id="author"><label for="author">Author</label></p>
    <button id="search">Search!</button>
    <table id=results>
    </table>
    <script>
      $("#search").on("click",function(){Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vRo8TwPNwdVNRBJHfohvdK3DJdxPt9qCwv4oIyq64r617EpIZrKbRoe7WkpcGvfa76ipSU_3Jvst3j-/pub?output=csv",{delimiter: ",",newline: "\r\n",header: true,dynamicTyping: false,skipEmptyLines: true,preview: 0,step: undefined,encoding: "",worker: true,comments: false,complete: function(file){
        var query = $("#query").val().toUpperCase();
        var results = "";
        if($("#title").is(":checked")){
          //Search By Title
          for (var i=0; i<file.data.length; i++) {
            if (file.data[i].title.toUpperCase().indexOf(query)>-1){results+="<tr><td>"+file.data[i].title+"</td><td>"+file.data[i].author+"</td><td>"+file.data[i].location+"</td><td><img src=\"https://drive.google.com/uc?export=view&id="+file.data[i].image+"\"></td></tr>";}
          }
        }
        else if($("#author").is(":checked")){
          //Search By Author
          for (var i=0; i<file.data.length; i++) {
            if (file.data[i].author.toUpperCase().indexOf(query)>-1){results+="<tr><td>"+file.data[i].title+"</td><td>"+file.data[i].author+"</td><td>+"+file.data[i].location+"+</td><td><img src=\"https://drive.google.com/uc?export=view&id="+file.data[i].image+"\"></td></tr>";}
          }}
        if (results === "") {
          $("#results").html("<tr><td>No Results :(</td></tr>");
        }
        else {
          $("#results").html("<tr><td>Title</td><td>Author</td><td></td>Location<td>Image</td></tr>"+results);
        }
      },error: console.error,download: true});})
    </script>
  </body>
</html>
