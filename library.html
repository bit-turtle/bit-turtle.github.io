<!DOCTYPE html>
<html>
  <head>
    <title>Library System</title>
    <script src="jquery.min.js"></script>
    <script src="papaparse.min.js"></script>
    <style>
    </style>
  </head>
  <body>
    <h1>Library System</h1>
    <input type="text" id="query">Search</input>
    <p>Settings:<br>Search by Title: <input type="radio" name="setting" id="title"><br>Search by Author: <input type="radio" name="setting" id="author"></p>
    <button id="search">Search!</button>
    <table id=results>
    </table>
    <script>
      $("#search").on("click",function(){Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vRo8TwPNwdVNRBJHfohvdK3DJdxPt9qCwv4oIyq64r617EpIZrKbRoe7WkpcGvfa76ipSU_3Jvst3j-/pub?output=csv",{delimiter: ",",newline: "\r\n",header: true,dynamicTyping: false,skipEmptyLines: true,preview: 0,step: undefined,encoding: "",worker: true,comments: false,complete: function(file){
        var query = $("#query").val().toUpperCase();
        var results = "";
        if($("#title").is(":checked")){
          //Search By Title
          for (var i=0; i<file.data.length; i++) {
            if (file.data[i].title.toUpperCase.indexOf(query)>-1){results+="<tr><td>"+file.data[i].title+"</td></tr>";}
          }
          $("#results").html("<tr><td>Title</td><td>Author</td><td>Image</td></tr>"+results);
        }
        else if($("#author").is(":checked")){
          //Search By Author
          for (var i=0; i<file.data.length; i++) {
            if (file.data[i].author.toUpperCase.indexOf(query)>-1){results+="<tr><td>"+file.data[i].title+"</td></tr>";}
          }
          $("#results").html("<tr><td>Title</td><td>Author</td><td>Image</td></tr>"+results);
      }},error: console.error,download: true});})
    </script>
  </body>
</html>
